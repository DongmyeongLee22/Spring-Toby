# \# 1. 재사용성과 다이나믹 디스패치, 더블 디스패치
- Sns에 Post하는 기능을  구현해보면서 더블 디스패치의 효과에대해 알아본다. 
 
### [V1](./DispatchV1.java)
- 현재는 SNS에 아무리 많더라도 오직 Text, Picture로 구분하여 로직을 작성할 수 있다.
- 각 SNS별로 구분하기위해선 Text, Picture에 if문을 돌리면서 구분하여야 한다.
- V2에서 이를 구현하였다.

### [V2](./DispatchV2.java)
- 이는 새로운 SNS가 생길 때 마다 각 Post 구현체마다 변경이 필요해지므로 확장성이 떨어지게 된다.
- 게다가 새로운 SNS의 기능이 추가되지 않아도 오류 없이 동작이 되게 된다.
- instanceof를 사용하는 로직이 안티패턴이라고 불리는 이유를 알 수 있다.

### [V3](./DispatchV3.java)
- Post에서 오버로딩을 이용하여 각 sns마다 기능을 다르게 구현하면 될 꺼같지만 실제 main 메서드를 확인해보면 에러가 발생한다.
- 왜냐하면 foreach에서 postOn을 호출할 때 넘기는 전달인자는 Sns타입이기 때문에 해당 sns을 받는 메서득 존재하지 않기 때문이다.
- 이럴 때 다형성을 두번적용한 더블 디스패치를 사용하여 해결 할 수 있다.

### [V4](./DispatchV4.java) 
- Post에서는 V1과 같이 Sns을 파라미터로 가지는 메서드만 구현한다.
- 해당 메서드에서는 직접 기능을 정의하는게아니라 sns에게 또 디스패치를 해준다.
- 그리고 Sns에서는 각 sns의 구현체를 파라미터로 받는 메서드들을 오버로딩해서 설계할 수 있다.
- 이렇게 되는 이유는 post의 postOn이 호출할 때는 sns타입으로 호출하지만 호출된 후에는 다형성으로 인해 각 구체적인 타입의 메서드가 동작되기 때문이다. 



 
